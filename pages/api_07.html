<html>
<head>
<link rel="stylesheet" type="text/css" href="../CSS/api.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<center>
API來源 : https://data.moa.gov.tw/Service/OpenData/ODwsv/ODwsvAgriBestItem.aspx?IsTransData=1&UnitId=375<br><hr>
<table border=1 width="95%">
    <caption><h1>農漁會年度百大農業精品好禮</h1></caption>
    <colgroup>
        <col span="3" width="9%">
        <col span="2" width="8%">
        <col span="1" width="35%">
        <col span="1" width="8%">
        <col span="1" width="14%">
    </colgroup>
    <tr>
        <th>農漁會名稱</th>
        <th>住址</th>
        <th>農漁會電話</th>
        <th>百大精品類別名稱</th>
        <th>百大精品產品名稱</th>
        <th>百大精品產品說明</th>
        <th>百大精品產品規格</th>
        <th>圖片</th>
    </tr>
     <tbody id="row"></tbody>
</table>

</body>
</html>
<!-- <script>
    $(document).ready(function(){
        $.ajax({
            url: ,
            type: 'get',
            dataType: "json",
            success: function(data){
                console.log(data);
            },
            error: function(data){
                console.log("失敗");
                console.log(e);
            }
        });
    });
</script> -->
<script>
    $(document).ready(function(){
        $.ajax({
            url: 'https://data.moa.gov.tw/Service/OpenData/ODwsv/ODwsvAgriBestItem.aspx?IsTransData=1&UnitId=375',
            type: 'get',
            dataType: "json",
            success: function(theData){
                // //-1
                // console.log(theData);
                // console.log(theData[0]);
                // console.log(theData.length);
                //-2
                theData.forEach(element => {
                    // console.log(element);
                    row=`
                    <tr>
                        <td>${element.AgriBuyMainName}</td>
                        <td>${element.AgriMainAdrs}</td>
                        <td>${element.AgriTel}</td>
                        <td>${element.AgriBtItemTypeNm}</td>
                        <td>${element.AgriBtItemNm}</td>
                        <td>${element.AgriBtItemCnt}</td>
                        <td>${element.AgriBtItemSpec}</td>
                        <td><img src="${element.Photo}" width="100%" height="100%"></td>
                    </tr>`;
                    $("#row").append(row);
                });
            },
            error: function(xhr, status, error){ 
                console.log("失敗");
                console.log("Status: " + status);       // 顯示狀態
                console.log("Error: " + error);         // 顯示錯誤訊息
                console.log("Response Text: " + xhr.responseText);  // 顯示回應的錯誤內容
            }
        });
    });
</script>
